/*
 * FullScreen Background  v1.5.1
 *
 * Copyright 2013-2014, LambertGroup
 * 
 */

(function(d){function Y(a,b,c){c.responsive&&(newCss="",-1!=a.css("font-size").lastIndexOf("px")?(fontSize=a.css("font-size").substr(0,a.css("font-size").lastIndexOf("px")),newCss+="font-size:"+fontSize/(c.origWidth/c.width)+"px;"):-1!=a.css("font-size").lastIndexOf("em")&&(fontSize=a.css("font-size").substr(0,a.css("font-size").lastIndexOf("em")),newCss+="font-size:"+fontSize/(c.origWidth/c.width)+"em;"),-1!=a.css("line-height").lastIndexOf("px")?(lineHeight=a.css("line-height").substr(0,a.css("line-height").lastIndexOf("px")), newCss+="line-height:"+lineHeight/(c.origWidth/c.width)+"px;"):-1!=a.css("line-height").lastIndexOf("em")&&(lineHeight=a.css("line-height").substr(0,a.css("line-height").lastIndexOf("em")),newCss+="line-height:"+lineHeight/(c.origWidth/c.width)+"em;"),a.wrapInner('<div class="newFS" style="'+newCss+'" />'));var f=a.attr("data-final-left"),g=a.attr("data-final-top");c.responsive&&(f=parseInt(f/(c.origWidth/c.width),10),g=parseInt(g/(c.origWidth/c.width),10));c=1;1==b.isVideoPlaying&&(c=0);a.animate({opacity:c, left:f+"px",top:g+"px"},1E3*a.attr("data-duration"),function(){1==b.isVideoPlaying&&d(b.currentImg.attr("data-text-id")).children().css("opacity",0)})}function M(a,b,c,f){d(a.currentImg.attr("data-text-id")).css("display","block");c=d(a.currentImg.attr("data-text-id")).children();var g=0;currentText_arr=[];c.each(function(){currentText_arr[g]=d(this);var c=currentText_arr[g].attr("data-initial-left"),f=currentText_arr[g].attr("data-initial-top");b.responsive&&(c=parseInt(c/(b.origWidth/b.width),10), f=parseInt(f/(b.origWidth/b.width),10));currentText_arr[g].css({left:c+"px",top:f+"px",opacity:parseInt(currentText_arr[g].attr("data-fade-start"),10)/100});var h=currentText_arr[g];setTimeout(function(){Y(h,a,b)},1E3*currentText_arr[g].attr("data-delay"));g++})}function N(a,b,c,f,g,k){J();-1==a&&(a=0);var m=d(g[a]),h=b.horizontalPosition;void 0!=m.attr("data-horizontalPosition")&&""!=m.attr("data-horizontalPosition")&&(h=m.attr("data-horizontalPosition"));g=b.verticalPosition;void 0!=m.attr("data-verticalPosition")&& ""!=m.attr("data-verticalPosition")&&(g=m.attr("data-verticalPosition"));f=f[a].split(";");b.width100Proc&&!b.height100Proc&&(f[0]/=b.origWidth/b.width,f[1]/=b.origWidth/b.width);var m=f[0],u=f[1];b.width100Proc&&b.height100Proc&&1<m&&(m=k.winWidth,u=m*f[1]/f[0],u<k.winHeight&&(u=k.winHeight,m=u*f[0]/f[1]),f[0]=parseInt(m,10),f[1]=parseInt(u,10));a=d("#contentHolderUnit_"+a,c).find("img:first");c=0;switch(h){case "left":c=0;break;case "center":c=(b.width-f[0])/2;break;case "right":c=b.width-f[0]; break;default:c=0}h=0;switch(g){case "top":h=-2;break;case "center":h=(b.height-f[1])/2;break;case "bottom":h=b.height-f[1]+2;break;default:h=0}1>=f[0]&&1>=f[1]?a.css({width:f[0]+"px",height:f[1]+"px",left:parseInt(c,10)+"px",top:parseInt(h,10)+"px",opacity:b.initialOpacity}):a.css({width:f[0]+"px",height:f[1]+"px","margin-left":parseInt(c,10)+"px","margin-top":parseInt(h,10)+"px",opacity:b.initialOpacity})}function T(a,b){nowx=(new Date).getTime();!a.mouseOverBanner&&b.showCircleTimer&&(a.ctx.clearRect(0, 0,a.canvas.width,a.canvas.height),a.ctx.beginPath(),a.ctx.globalAlpha=b.behindCircleAlpha/100,a.ctx.arc(b.circleRadius+2*b.circleLineWidth,b.circleRadius+2*b.circleLineWidth,b.circleRadius,0,2*Math.PI,!1),a.ctx.lineWidth=b.circleLineWidth+2,a.ctx.strokeStyle=b.behindCircleColor,a.ctx.stroke(),a.ctx.beginPath(),a.ctx.globalAlpha=b.circleAlpha/100,a.ctx.arc(b.circleRadius+2*b.circleLineWidth,b.circleRadius+2*b.circleLineWidth,b.circleRadius,0,(a.timeElapsed+nowx-a.arcInitialTime)/1E3*2/b.autoPlay*Math.PI, !1),a.ctx.lineWidth=b.circleLineWidth,a.ctx.strokeStyle=b.circleColor,a.ctx.stroke())}function D(a,b,c,f,g,k,m,h,u,n,l,z,v,E,s,q,r){var A=!0;if(!c.loop&&b.current_img_no+a>=f||!c.loop&&0>b.current_img_no+a||2>f)A=!1;A&&!b.slideIsRunning&&(b.slideIsRunning=!0,d(".newFS",n).contents().unwrap(),b.arcInitialTime=(new Date).getTime(),b.timeElapsed=0,c.showCircleTimer&&(clearInterval(b.intervalID),b.ctx.clearRect(0,0,b.canvas.width,b.canvas.height),b.ctx.beginPath(),b.ctx.globalAlpha=c.behindCircleAlpha/ 100,b.ctx.arc(c.circleRadius+2*c.circleLineWidth,c.circleRadius+2*c.circleLineWidth,c.circleRadius,0,2*Math.PI,!1),b.ctx.lineWidth=c.circleLineWidth+2,b.ctx.strokeStyle=c.behindCircleColor,b.ctx.stroke(),b.ctx.beginPath(),b.ctx.globalAlpha=c.circleAlpha/100,b.ctx.arc(c.circleRadius+2*c.circleLineWidth,c.circleRadius+2*c.circleLineWidth,c.circleRadius,0,0,!1),b.ctx.lineWidth=c.circleLineWidth,b.ctx.strokeStyle=c.circleColor,b.ctx.stroke(),b.intervalID=setInterval(function(){T(b,c)},125)),b.bottomNavClicked|| (b.previous_current_img_no=b.current_img_no),b.bottomNavClicked=!1,d(b.currentImg.attr("data-text-id")).css("display","none"),"bullets"==c.skin&&d(g[b.current_img_no]).removeClass("bottomNavButtonON"),"bullets"!=c.skin&&d(v[b.current_img_no]).css({"border-color":c.thumbsBorderColorOFF}),l.css("display","none"),b.current_img_no=b.current_img_no+a>=f?0:0>b.current_img_no+a?f-1:b.current_img_no+a,"bullets"==c.skin&&d(g[b.current_img_no]).addClass("bottomNavButtonON"),"bullets"!=c.skin&&(d(v[b.current_img_no]).css({"border-color":c.thumbsBorderColorON}), currentCarouselLeft=E.css("left").substr(0,E.css("left").lastIndexOf("px")),0===b.current_img_no||b.current_img_no===f-1?O(0,E,s,q,c,f,r,b):O(1001,E,s,q,c,f,r,b)),c.fadeSlides?(d("#contentHolderUnit_"+b.current_img_no,n).css({opacity:1,"z-index":0,display:"block"}),d("#contentHolderUnit_"+b.previous_current_img_no,n).css({"z-index":1,display:"block"}),d("#contentHolderUnit_"+b.previous_current_img_no,n).animate({opacity:0},800,"easeOutQuad",function(){b.slideIsRunning=!1;c.fadeSlides&&(d("#contentHolderUnit_"+ b.current_img_no,n).css({"z-index":1}),d("#contentHolderUnit_"+b.previous_current_img_no,n).css({"z-index":0,display:"none"}));b.currentImg=d(k[b.current_img_no]);"true"==b.currentImg.attr("data-video")&&l.css("display","block");"true"==d(k[b.previous_current_img_no]).attr("data-video")&&(d("#contentHolderUnit_"+b.previous_current_img_no,n).html(d(k[b.previous_current_img_no]).html()),N(b.previous_current_img_no,c,n,z,k,b));M(b,c,m,h);0<c.autoPlay&&1<f&&!b.mouseOverBanner&&(clearTimeout(b.timeoutID), b.timeoutID=setTimeout(function(){D(1,b,c,f,g,k,m,h,u,n,l,z,v,E,s,q,r)},1E3*c.autoPlay))})):u.animate({left:-1*b.current_img_no*c.width+"px"},800,"easeOutQuad",function(){b.slideIsRunning=!1;b.currentImg=d(k[b.current_img_no]);"true"==b.currentImg.attr("data-video")&&l.css("display","block");"true"==d(k[b.previous_current_img_no]).attr("data-video")&&(d("#contentHolderUnit_"+b.previous_current_img_no,n).html(d(k[b.previous_current_img_no]).html()),N(b.previous_current_img_no,c,n,z,k,b));M(b,c,m,h); 0<c.autoPlay&&1<f&&!b.mouseOverBanner&&(clearTimeout(b.timeoutID),b.timeoutID=setTimeout(function(){D(1,b,c,f,g,k,m,h,u,n,l,z,v,E,s,q,r)},1E3*c.autoPlay))}),-1!=J()&&c.texturePath&&d(".texture_over_image",n).css("display","block"))}function O(a,b,d,f,g,k,m,h){currentCarouselLeft=b.css("left").substr(0,b.css("left").lastIndexOf("px"));1===a||-1===a?(h.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:"+="+a*h.carouselStep},500,"easeOutCubic",function(){I(h,b,d,f,g,k,m);h.isCarouselScrolling= !1})):currentCarouselLeft!=-1*Math.floor(h.current_img_no/g.numberOfThumbsPerScreen)*h.carouselStep&&(h.isCarouselScrolling=!0,b.css("opacity","0.5"),b.animate({opacity:1,left:-1*Math.floor(h.current_img_no/g.numberOfThumbsPerScreen)*h.carouselStep},500,"easeOutCubic",function(){I(h,b,d,f,g,k,m);h.isCarouselScrolling=!1}))}function I(a,b,d,f,g,k,m){currentCarouselLeft=b.css("left").substr(0,b.css("left").lastIndexOf("px"));0>currentCarouselLeft?d.hasClass("carouselLeftNavDisabled")&&d.removeClass("carouselLeftNavDisabled"): d.addClass("carouselLeftNavDisabled");Math.abs(currentCarouselLeft-a.carouselStep)<(2*a.thumbBorderWidth+m.width()+a.thumbMarginLeft)*k?f.hasClass("carouselRightNavDisabled")&&f.removeClass("carouselRightNavDisabled"):f.addClass("carouselRightNavDisabled")}function U(a,b,c,f,g,k,m,h,u,n,l){"bullets"!=b.skin&&(l.css({top:b.height+"px","margin-top":parseInt(b.thumbsWrapperMarginTop/(b.origWidth/b.width),10)+"px",height:parseInt(b.origthumbsHolderWrapperH/(b.origWidth/b.width),10)+"px"}),bgTopCorrection= 0,m.css("background-position","0px "+((l.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),h.css("background-position","0px "+((l.height()-b.origthumbsHolderWrapperH)/2+bgTopCorrection)+"px"),n.css("width",b.width-m.width()-h.width()),b.origWidthThumbsHolderVisibleWrapper=b.origWidth-m.width()-h.width(),g.css({width:parseInt(b.origThumbW/(b.origWidthThumbsHolderVisibleWrapper/n.width()),10)+"px",height:parseInt(b.origThumbH/(b.origWidthThumbsHolderVisibleWrapper/n.width()),10)+"px"}), d(".thumbsHolder_ThumbOFF",f).find("img:first").css({width:g.width()+"px",height:g.height()+"px"}),a.thumbMarginLeft=Math.floor((l.width()-m.width()-h.width()-(2*a.thumbBorderWidth+u.width())*b.numberOfThumbsPerScreen)/(b.numberOfThumbsPerScreen-1)),thumb_i=-1,k.children().each(function(){thumb_i++;theThumb=d(this);0>=thumb_i?theThumb.css("margin-left",Math.floor((l.width()-m.width()-h.width()-(a.thumbMarginLeft+(2*a.thumbBorderWidth+theThumb.width()))*(b.numberOfThumbsPerScreen-1)-(2*a.thumbBorderWidth+ theThumb.width()))/2)+"px"):theThumb.css("margin-left",a.thumbMarginLeft+"px")}),a.carouselStep=(2*a.thumbBorderWidth+u.width()+a.thumbMarginLeft)*b.numberOfThumbsPerScreen);if(b.numberOfThumbsPerScreen>=c)switch(b.bottomNavPos){case "left":n.css("left",b.bottomNavLateralMargin+a.thumbMarginLeft+"px");break;case "right":n.css("left",b.width-(2*a.thumbBorderWidth+g.width()+a.thumbMarginLeft)*c-b.bottomNavLateralMargin+"px");break;default:n.css("left",parseInt((l.width()-(2*a.thumbBorderWidth+u.width()+ a.thumbMarginLeft)*c)/2,10)+"px")}}function V(a,b,c,f){var g=b.videoProportionWidth;b=b.videoProportionHeight;b=9;void 0!=d(c[a.current_img_no]).attr("data-videoProportionWidth")&&""!=d(c[a.current_img_no]).attr("data-videoProportionWidth")&&(g=d(c[a.current_img_no]).attr("data-videoProportionWidth"));a=parseInt(1280/g*b,10);windowW=d(window).width()+1;windowH=d(window).height();c=1/(1280/windowW);a/windowH<1280/windowW&&(c=1/(a/windowH));16!=g&&(c+=.11);d("iframe",f).css({width:1280*c+"px",height:a* c+"px",left:parseInt((windowW-1280*c)/2,10)+"px",top:parseInt((windowH-a*c)/2,10)+"px"})}function J(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return parseInt(a,10)}function Z(a){var b=!1;a=a.substr(a.length-4).toLowerCase();if(".jpg"==a||".png"==a||".gif"==a)b=!0;return b}d.fn.fullscreen_background=function(a){a=d.extend({},d.fn.fullscreen_background.defaults,a);return this.each(function(){var b= d(this);responsiveWidth=b.parent().width();responsiveHeight=b.parent().height();a.responsiveRelativeToBrowser&&(responsiveWidth=d(window).width(),responsiveHeight=d(window).height());a.origWidth=a.width;a.fadeSlides||--a.origWidth;a.width100Proc&&(a.width=responsiveWidth);a.origHeight=a.height;a.height100Proc&&(a.height=responsiveHeight);a.responsive&&(a.origWidth!=responsiveWidth||a.width100Proc)&&(a.width=a.origWidth>responsiveWidth||a.width100Proc?responsiveWidth:a.origWidth,a.height100Proc||(a.height= a.width/(a.origWidth/a.origHeight)));a.enableTouchScreen&&a.responsive&&a.fadeSlides&&--a.width;var c=d("<div></div>").addClass("fullscreen_background").addClass(a.skin),f=d('<div class="bannerControls"> <div class="leftNav"></div> <div class="rightNav"></div> </div> <div class="contentHolderVisibleWrapper"><div class="contentHolder"></div></div> <div class="playOver"></div> <div class="thumbsHolderWrapper"><div class="thumbsHolderVisibleWrapper"><div class="thumbsHolder"></div></div></div> <canvas class="mycanvas"></canvas>'); b.wrap(c);a.texturePath&&(b.append('<div class="texture_over_image" />'),d(".texture_over_image",g).css({background:"url("+a.texturePath+")"}));b.after(f);var g=b.parent(".fullscreen_background");a.setAsBg&&g.wrap('<div class="setAsBg" />');var k=d(".bannerControls",g),m=d(".contentHolderVisibleWrapper",g),h=d(".contentHolder",g),c=d('<div class="bottomNav"></div>');b.after(c);a.showAllControllers||k.css("display","none");var u=d(".leftNav",g),n=d(".rightNav",g);u.css("display","none");n.css("display", "none");a.showNavArrows&&a.showOnInitNavArrows&&(u.css("display","block"),n.css("display","block"));var l=d(".bottomNav",g),z;"bullets"==a.skin&&(l.css({display:"block",top:a.height+"px"}),a.width100Proc&&a.height100Proc?l.css("margin-top",a.thumbsWrapperMarginTop+"px"):l.css("margin-top",a.thumbsWrapperMarginTop/(a.origWidth/a.width)+"px"));a.showBottomNav||l.css("display","none");a.showOnInitBottomNav||l.css("left","-5000px");var v=d(".thumbsHolderWrapper",g),E=d(".thumbsHolderVisibleWrapper",g), s=d(".thumbsHolder",g),q,r;q=d('<div class="carouselLeftNav"></div>');r=d('<div class="carouselRightNav"></div>');v.append(q);v.append(r);r.css("right","0");s.css("width",q.width()+"px");a.showBottomNav&&a.showOnInitBottomNav||v.css({opacity:0,display:"none"});"bullets"!=a.skin&&v.css("margin-top",parseInt(a.thumbsWrapperMarginTop/(a.origWidth/a.width),10)+"px");var A=J();-1!=A&&a.texturePath&&d(".texture_over_image",g).click(function(){var b=d(w[e.current_img_no]);if(void 0!=b.attr("data-link")&& ""!=b.attr("data-link")){var c=a.target;void 0!=b.attr("data-target")&&""!=b.attr("data-target")&&(c=b.attr("data-target"));"_blank"==c?window.open(b.attr("data-link")):window.location=b.attr("data-link")}else"true"==b.attr("data-video")&&x.click()});a.enableTouchScreen&&(a.fadeSlides&&(c=Math.floor(1E5*Math.random()),g.wrap('<div id="fullbgParent_'+c+'" style="position:relative;" />'),d("#fullbgParent_"+c).width(a.width+1),d("#fullbgParent_"+c).height(a.height)),-1!=A&&9==A&&a.fadeSlides&&"bullets"== a.skin||(h.css("cursor","url("+a.absUrl+"skins/hand.cur),url("+a.absUrl+"skins/hand.cur),move"),g.css("cursor","url("+a.absUrl+"skins/hand.cur),url("+a.absUrl+"skins/hand.cur),move")),h.css("left","0"),a.fadeSlides?-1!=A&&9==A&&a.fadeSlides&&"bullets"==a.skin||g.draggable({axis:"x",containment:"parent",start:function(a,b){origLeft=d(this).css("left");x.css("display","none")},stop:function(c,f){e.slideIsRunning||(finalLeft=d(this).css("left"),direction=1,origLeft<finalLeft&&(direction=-1),d(this).css("left", "0px"),D(direction,e,a,p,B,w,b,k,h,g,x,F,y,s,q,r,t))}}):h.draggable({axis:"x",distance:10,start:function(a,b){origLeft=parseInt(d(this).css("left"),10);x.css("display","none")},stop:function(c,f){e.slideIsRunning||(finalLeft=parseInt(d(this).css("left"),10),direction=1,origLeft<finalLeft&&(direction=-1),D(direction,e,a,p,B,w,b,k,h,g,x,F,y,s,q,r,t))}}));var x=d(".playOver",g);x.css({left:parseInt((a.width-x.width())/2,10)+"px",top:parseInt((a.height-x.height())/2,10)+"px"});var e={current_img_no:0, currentImg:0,previous_current_img_no:0,slideIsRunning:!1,mouseOverBanner:!1,isVideoPlaying:!1,bottomNavClicked:!1,current_imgInside:"",windowWidth:0,carouselStep:0,thumbBorderWidth:0,thumbMarginLeft:0,timeoutID:"",intervalID:"",arcInitialTime:(new Date).getTime(),timeElapsed:0,canvas:"",ctx:"",bannerRatio:a.origWidth/a.origHeight,msiInterval:"",msiInitialTime:(new Date).getTime(),winWidth:0,winHeight:0};e.winWidth=d(window).width();e.winHeight=d(window).height();e.canvas=d(".mycanvas",g)[0];e.canvas.width= 2*a.circleRadius+4*a.circleLineWidth;e.canvas.height=2*a.circleRadius+4*a.circleLineWidth;-1!=A&&9>A&&(a.showCircleTimer=!1);a.showCircleTimer&&(e.ctx=e.canvas.getContext("2d"));var F=[],Q=0;g.width(a.width);g.height(a.height);m.width(a.width);m.height(a.height);h.width(a.width);h.height(a.height);k.css("margin-top",parseInt((a.height-u.height())/2,10)+"px");var p=0,w=b.find("ul:first").children(),H,R=0,G,L=0,I=0,K,t,W=0,X=0;w.each(function(){e.currentImg=d(this);e.currentImg.is("li")||(e.currentImg= e.currentImg.find("li:first"));e.currentImg.is("li")&&(p++,myzindex=0,mydisplay="none",1==p&&(myzindex=1,mydisplay="block"),H=d('<div class="contentHolderUnit" rel="'+(p-1)+'" id="contentHolderUnit_'+(p-1)+'">'+e.currentImg.html()+"</div>"),1>=w.length&&e.currentImg.html(""),a.fadeSlides?H.css({position:"absolute",top:0,left:0,"z-index":myzindex,display:mydisplay}):H.css({position:"relative","float":"left"}),H.width(a.width),H.height(a.height),h.append(H),R+=a.width,e.current_img_no=p-1,K=d("#contentHolderUnit_"+ e.current_img_no,g).find("img:first"),F[p-1]=K.width()+";"+K.height(),N(p-1,a,g,F,w,e),"bullets"==a.skin&&(G=d('<div class="bottomNavButtonOFF" rel="'+(p-1)+'"></div>'),l.append(G),L+=parseInt(G.css("padding-left").substring(0,G.css("padding-left").length-2),10)+G.width(),I=parseInt((l.height()-parseInt(G.css("height").substring(0,G.css("height").length-2)))/2,10),G.css("margin-top",I+"px")),"bullets"!=a.skin&&(image_name=d(w[p-1]).attr("data-bottom-thumb"),t=d('<div class="thumbsHolder_ThumbOFF" rel="'+ (p-1)+'"><img src="'+image_name+'"></div>'),s.append(t),0==a.origThumbW&&(0==a.numberOfThumbsPerScreen&&(a.numberOfThumbsPerScreen=Math.floor((a.origWidth-q.width()-r.width())/(2*e.thumbBorderWidth+t.width()))-1),a.origThumbW=t.width(),a.origThumbH=t.height(),a.origthumbsHolderWrapperH=v.height(),e.thumbBorderWidth=t.css("borderLeftWidth").substr(0,t.css("borderLeftWidth").lastIndexOf("px")),e.thumbMarginLeft=Math.floor((a.origWidth-q.width()-r.width()-(2*e.thumbBorderWidth+t.width())*a.numberOfThumbsPerScreen)/ (a.numberOfThumbsPerScreen-1))),s.css("width",s.width()+e.thumbMarginLeft+(2*e.thumbBorderWidth+t.width())+"px"),W=parseInt((v.height()-parseInt(t.css("height").substring(0,t.css("height").length-2)))/2,10)),X=a.fadeSlides?0:parseInt((p-1)*a.width,10),h.append(d(e.currentImg.attr("data-text-id"))),d(e.currentImg.attr("data-text-id")).css({width:b.width()+"px",left:X,top:k.css("top")}))});1>=p&&(a.autoPlay=0,a.showNavArrows=!1,a.showOnInitNavArrows=!1,a.showBottomNav=!1,a.showOnInitBottomNav=!1,u.css("display", "none"),n.css("display","none"),l.css("display","none"));c=a.thumbsWrapperBg;Z(a.thumbsWrapperBg)&&(c="url("+a.thumbsWrapperBg+")");v.css({background:c});h.width(R);l.width(L);if(a.showOnInitBottomNav)switch(a.bottomNavPos){case "left":l.css("left",a.bottomNavLateralMargin+"px");break;case "right":l.css("left",parseInt(g.width()-L,10)-a.bottomNavLateralMargin+"px");break;default:l.css("left",parseInt((g.width()-L)/2,10)+"px")}"bullets"!=a.skin&&(E.css({width:a.origWidth-q.width()-r.width(),left:q.width()+ "px"}),e.carouselStep=(2*e.thumbBorderWidth+t.width()+e.thumbMarginLeft)*a.numberOfThumbsPerScreen,q.addClass("carouselLeftNavDisabled"),a.numberOfThumbsPerScreen>=p&&(r.addClass("carouselRightNavDisabled"),q.css("display","none"),r.css("display","none"),E.css("left",parseInt((v.width()-(2*e.thumbBorderWidth+t.width()+e.thumbMarginLeft)*p)/2,10)+"px")),v.css("top",a.height+"px"),d(".thumbsHolder_ThumbOFF",g).find("img:first"),a.origthumbsHolder_MarginTop=W);var y=d(".thumbsHolder_ThumbOFF",g);y.css({"border-color":a.thumbsBorderColorOFF}); U(e,a,p,g,y,s,q,r,t,E,v);d("iframe",g).each(function(){var a=d(this).attr("src"),b="?wmode=transparent";-1!=a.indexOf("?")&&(b="&wmode=transparent");d(this).attr("src",a+b)});e.current_img_no=0;a.fadeSlides&&d("#contentHolderUnit_"+e.current_img_no,g).css({"z-index":1});e.currentImg=d(w[0]);c=g.find("img:first");c[0].complete?(d(".myloader",g).css("display","none"),M(e,a,b,k)):c.load(function(){d(".myloader",g).css("display","none");M(e,a,b,k)});g.mouseenter(function(){a.pauseOnMouseOver&&(e.mouseOverBanner= !0,clearTimeout(e.timeoutID),nowx=(new Date).getTime(),e.timeElapsed+=nowx-e.arcInitialTime);a.autoHideNavArrows&&a.showNavArrows&&(u.css("display","block"),n.css("display","block"));a.autoHideBottomNav&&a.showBottomNav&&("bullets"==a.skin?l.css({display:"block"}):0>a.thumbsWrapperMarginTop&&e.isVideoPlaying||!a.showBottomNav||(v.css({display:"block"}),v.stop().animate({opacity:1},500,"swing",function(){})))});g.mouseleave(function(){a.pauseOnMouseOver&&(e.mouseOverBanner=!1,nowx=(new Date).getTime()); a.autoHideNavArrows&&a.showNavArrows&&!e.isVideoPlaying&&(u.css("display","none"),n.css("display","none"));a.autoHideBottomNav&&a.showBottomNav&&("bullets"==a.skin?l.css("display","none"):v.stop().animate({opacity:0},300,"swing",function(){}));if(0<a.autoPlay&&1<p&&!e.isVideoPlaying&&a.pauseOnMouseOver){clearTimeout(e.timeoutID);e.arcInitialTime=(new Date).getTime();var d=parseInt(1E3*a.autoPlay-(e.timeElapsed+nowx-e.arcInitialTime),10);e.timeoutID=setTimeout(function(){D(1,e,a,p,B,w,b,k,h,g,x,F, y,s,q,r,t)},d)}});c=d(".contentHolderUnit",h);-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("Android")?c.css("z-index","1"):-1!=navigator.userAgent.indexOf("Chrome")&&-1==navigator.userAgent.indexOf("Android")&&c.css("z-index","1");c.click(function(){var b=d(this).attr("rel");"true"==d(w[e.current_img_no]).attr("data-video")&&(b!=e.current_img_no?e.isVideoPlaying=!1:x.click());var c=d(w[e.current_img_no]);void 0!=c.attr("data-link")&& b==e.current_img_no&&""!=c.attr("data-link")&&(b=a.target,void 0!=c.attr("data-target")&&""!=c.attr("data-target")&&(b=c.attr("data-target")),"_blank"==b?window.open(c.attr("data-link")):window.location=c.attr("data-link"))});x.click(function(){x.css("display","none");clearTimeout(e.timeoutID);K=d("#contentHolderUnit_"+e.current_img_no,g).find("img:first");K.css("display","none");d(e.currentImg.attr("data-text-id")).children().css("opacity",0);e.isVideoPlaying=!0;0>a.thumbsWrapperMarginTop&&(v.css("display", "none"),"bullets"==a.skin&&l.css("display","none"));a.showCircleTimer&&(clearInterval(e.intervalID),e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.beginPath(),e.ctx.globalAlpha=0,e.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius,0,0,!1),e.ctx.lineWidth=a.circleLineWidth+2,e.ctx.strokeStyle=a.behindCircleColor,e.ctx.stroke(),e.ctx.beginPath(),e.ctx.globalAlpha=0,e.ctx.arc(a.circleRadius+2*a.circleLineWidth,a.circleRadius+2*a.circleLineWidth,a.circleRadius, 0,0,!1),e.ctx.lineWidth=a.circleLineWidth,e.ctx.strokeStyle=a.circleColor,e.ctx.stroke());-1!=A&&a.texturePath&&d(".texture_over_image",g).css("display","none")});u.click(function(){e.slideIsRunning||(e.isVideoPlaying=!1,a.showBottomNav&&(v.css({opacity:1,display:"block"}),"bullets"==a.skin&&l.css("display","block")),clearTimeout(e.timeoutID),D(-1,e,a,p,B,w,b,k,h,g,x,F,y,s,q,r,t))});n.click(function(){e.slideIsRunning||(e.isVideoPlaying=!1,a.showBottomNav&&(v.css({opacity:1,display:"block"}),"bullets"== a.skin&&l.css("display","block")),clearTimeout(e.timeoutID),D(1,e,a,p,B,w,b,k,h,g,x,F,y,s,q,r,t))});var S=!1;d(window).resize(function(){var c=J();doResizeNow=!0;var f=navigator.userAgent.toLowerCase();-1!=f.indexOf("android")&&(0==a.windowOrientationScreenSize0&&0==window.orientation&&(a.windowOrientationScreenSize0=d(window).width()),0==a.windowOrientationScreenSize90&&90==window.orientation&&(a.windowOrientationScreenSize90=d(window).height()),0==a.windowOrientationScreenSize_90&&-90==window.orientation&& (a.windowOrientationScreenSize_90=d(window).height()),a.windowOrientationScreenSize0&&0==window.orientation&&d(window).width()>a.windowOrientationScreenSize0&&(doResizeNow=!1),a.windowOrientationScreenSize90&&90==window.orientation&&d(window).height()>a.windowOrientationScreenSize90&&(doResizeNow=!1),a.windowOrientationScreenSize_90&&-90==window.orientation&&d(window).height()>a.windowOrientationScreenSize_90&&(doResizeNow=!1),0==e.windowWidth&&(doResizeNow=!1,e.windowWidth=d(window).width()));-1!= c&&9==c&&0==e.windowWidth&&(doResizeNow=!1);e.windowWidth==d(window).width()?(doResizeNow=!1,a.windowCurOrientation!=window.orientation&&-1!=navigator.userAgent.indexOf("Android")&&(a.windowCurOrientation=window.orientation,doResizeNow=!0)):e.windowWidth=d(window).width();if(-1!=f.indexOf("ipad")||-1!=f.indexOf("iphone")||-1!=f.indexOf("ipod")||-1!=f.indexOf("webos"))doResizeNow=!0;a.responsive&&doResizeNow&&(!1!==S&&clearTimeout(S),S=setTimeout(function(){var c=e,f=a,n=p,P=w,C=g,z=x,A=F,G=y,$=B, H=t,I=L;if(f.width100Proc&&f.height100Proc&&!f.setAsBg){var K=d("body").css("overflow");d("body").css("overflow","hidden")}c.winWidth=d(window).width();c.winHeight=d(window).height();var J=0;f.enableTouchScreen&&f.fadeSlides?(responsiveWidth=b.parent().parent().parent().width(),responsiveHeight=b.parent().parent().parent().height()):(responsiveWidth=b.parent().parent().width(),responsiveHeight=b.parent().parent().height());f.responsiveRelativeToBrowser&&(responsiveWidth=d(window).width(),responsiveHeight= d(window).height());f.width100Proc&&(f.width=responsiveWidth);f.height100Proc&&(f.height=responsiveHeight);if(f.origWidth!=responsiveWidth||f.width100Proc){f.origWidth>responsiveWidth||f.width100Proc?f.width=responsiveWidth:f.width100Proc||(f.width=f.origWidth);f.height100Proc||(f.height=f.width/c.bannerRatio);C.width(f.width);C.height(f.height);m.width(f.width);m.height(f.height);h.width(f.width);h.height(f.height);k.css("margin-top",parseInt((f.height-u.height())/2,10)+"px");contentHolderUnit=d(".contentHolderUnit", C);contentHolderUnit.width(f.width);contentHolderUnit.height(f.height);f.enableTouchScreen&&f.fadeSlides&&(C.parent().width(f.width+1),C.parent().height(f.height));holderWidth=f.width*n;for(i=0;i<n;i++)N(i,f,C,A,P,c),J=f.fadeSlides?0:parseInt(i*f.width,10),d(d(P[i]).attr("data-text-id")).css({width:b.width()+"px",left:J,top:k.css("top")});h.width(holderWidth);if("bullets"==f.skin){switch(f.bottomNavPos){case "left":l.css({left:f.bottomNavLateralMargin+"px",top:f.height+"px"});break;case "right":l.css({left:parseInt(C.width()- I,10)-f.bottomNavLateralMargin+"px",top:f.height+"px"});break;default:l.css({left:parseInt((C.width()-I)/2,10)+"px",top:f.height+"px"})}f.width100Proc&&f.height100Proc||l.css("margin-top",parseInt(f.thumbsWrapperMarginTop/(f.origWidth/f.width),10)+"px")}else U(c,f,n,C,G,s,q,r,H,E,v);z.css({left:parseInt((f.width-z.width())/2,10)+"px",top:parseInt((f.height-z.height())/2,10)+"px"});2<=n?(clearTimeout(c.timeoutID),D(1,c,f,n,$,P,b,k,h,C,z,A,G,s,q,r,H)):(d(".newFS",C).contents().unwrap(),d(c.currentImg.attr("data-text-id")).css("display", "none"),M(c,f,b,k));f.width100Proc&&f.height100Proc&&f.setAsBg&&V(c,f,P,C)}f.width100Proc&&f.height100Proc&&!f.setAsBg&&d("body").css("overflow",K)},300))});var B=d(".bottomNavButtonOFF",g);"bullets"==a.skin&&(B.click(function(){if(!e.slideIsRunning){e.isVideoPlaying=!1;var c=d(this).attr("rel");e.current_img_no!=c&&(d(B[e.current_img_no]).removeClass("bottomNavButtonON"),e.previous_current_img_no=e.current_img_no,e.bottomNavClicked=!0,e.current_img_no=c-1,clearTimeout(e.timeoutID),D(1,e,a,p,B,w, b,k,h,g,x,F,y,s,q,r,t))}}),B.mouseenter(function(){var b=d(this),c=b.attr("rel");if(a.showPreviewThumbs){z=d('<div class="bottomOverThumb"></div>');b.append(z);var e=d(w[c]).attr("data-bottom-thumb"),f=d(w[Q]).attr("data-bottom-thumb"),g=80,h=-80;Q>c&&(g=-80,h=80);z.html("");z.html('<div class="innerBottomOverThumb"><img src="'+f+'"style="margin:0px;" id="oldThumb"><img src="'+e+'" style="margin-top:-80px; margin-left:'+g+'px;" id="newThumb"></div>');d("#newThumb").stop().animate({marginLeft:"0px"}, 150,function(){z.html('<div class="innerBottomOverThumb"><img src="'+e+'"></div>')});d("#oldThumb").stop().animate({marginLeft:h+"px"},150,function(){});Q=c}b.addClass("bottomNavButtonON")}),B.mouseleave(function(){var b=d(this),c=b.attr("rel");a.showPreviewThumbs&&z.remove();e.current_img_no!=c&&b.removeClass("bottomNavButtonON")}));y.mousedown(function(){if(!e.slideIsRunning){arrowClicked=!0;e.isVideoPlaying=!1;var c=d(this).attr("rel");e.current_img_no!=c&&(d(y[e.current_img_no]).css({"border-color":a.thumbsBorderColorOFF}), e.previous_current_img_no=e.current_img_no,e.bottomNavClicked=!0,e.current_img_no=c-1,clearTimeout(e.timeoutID),D(1,e,a,p,B,w,b,k,h,g,x,F,y,s,q,r,t))}});y.mouseup(function(){arrowClicked=!1});y.mouseenter(function(){var b=d(this);b.attr("rel");b.css({"border-color":a.thumbsBorderColorON})});y.mouseleave(function(){var b=d(this),c=b.attr("rel");e.current_img_no!=c&&b.css({"border-color":a.thumbsBorderColorOFF})});q.click(function(){e.isCarouselScrolling||(currentCarouselLeft=s.css("left").substr(0, s.css("left").lastIndexOf("px")),0>currentCarouselLeft&&O(1,s,q,r,a,p,t,e))});r.click(function(){e.isCarouselScrolling||(currentCarouselLeft=s.css("left").substr(0,s.css("left").lastIndexOf("px")),Math.abs(currentCarouselLeft-e.carouselStep)<(2*e.thumbBorderWidth+t.width()+e.thumbMarginLeft)*p&&O(-1,s,q,r,a,p,t,e))});a.width100Proc&&a.height100Proc&&a.setAsBg&&V(e,a,w,g);"bullets"==a.skin&&d(B[e.current_img_no]).addClass("bottomNavButtonON");d(y[e.current_img_no]).css({"border-color":a.thumbsBorderColorON}); 0<a.autoPlay&&1<p&&(a.showCircleTimer&&(e.intervalID=setInterval(function(){T(e,a)},125)),e.timeoutID=setTimeout(function(){D(1,e,a,p,B,w,b,k,h,g,x,F,y,s,q,r,t)},1E3*a.autoPlay));"true"==d(w[e.current_img_no]).attr("data-video")&&x.css("display","block")})};d.fn.fullscreen_background.defaults={skin:"bullets",width:1920,height:600,width100Proc:!0,height100Proc:!0,autoPlay:6,fadeSlides:!0,loop:!0,setAsBg:!0,texturePath:"",horizontalPosition:"center",verticalPosition:"center",initialOpacity:1,target:"_blank", pauseOnMouseOver:!1,showCircleTimer:!0,showCircleTimerIE8IE7:!1,circleRadius:8,circleLineWidth:4,circleColor:"#ffffff",circleAlpha:100,behindCircleColor:"#000000",behindCircleAlpha:20,responsive:!0,responsiveRelativeToBrowser:!0,numberOfThumbsPerScreen:0,bottomNavPos:"right",bottomNavLateralMargin:0,thumbsWrapperMarginTop:-110,thumbsWrapperBg:"",thumbsBorderColorON:"#000000",thumbsBorderColorOFF:"#7a7a7a",showAllControllers:!0,showNavArrows:!0,showOnInitNavArrows:!0,autoHideNavArrows:!0,showBottomNav:!0, showOnInitBottomNav:!0,autoHideBottomNav:!1,showPreviewThumbs:!0,enableTouchScreen:!0,absUrl:"",videoProportionWidth:16,videoProportionHeight:9,origWidth:0,origHeight:0,origThumbW:0,origThumbH:0,origthumbsHolderWrapperH:0,origthumbsHolder_MarginTop:0,windowOrientationScreenSize0:0,windowOrientationScreenSize90:0,windowOrientationScreenSize_90:0,windowCurOrientation:0}})(jQuery);